<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>اختبار حياة عميش</title>
<style>
  body {
    margin: 0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #3a3a3a);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }
  h1, h2 { text-align: center; }
  .screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    animation: fadeIn 0.5s ease-in-out;
  }
  .active { display: flex; }
  button {
    padding: 12px 24px;
    border: none;
    background: #ff0066;
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: transform 0.2s;
  }
  button:hover { transform: scale(1.1); }
  .question {
    font-size: 1.4rem;
    margin: 1rem 0;
    text-align: center;
  }
  .choices {
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
  }
  .score, .timer {
    font-size: 1.2rem;
    background: #222;
    padding: 8px 16px;
    border-radius: 8px;
    margin: 4px;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    width: 90%;
  }
  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
</style>
</head>
<body>

<!-- شاشة البداية -->
<div id="startScreen" class="screen active">
  <h1>يا حياة عميش 👋</h1>
  <h2>مستعدة للاختبار؟</h2>
  <button onclick="goToMenu()">ابدأ اللعب</button>
</div>

<!-- شاشة اختيار الاختبارات -->
<div id="menuScreen" class="screen">
  <h2>اختاري نوع الاختبار</h2>
  <button onclick="startGame('personality')">اختبار الشخصية (MBTI)</button>
  <button onclick="startGame('reaction')">اختبار ردود الأفعال</button>
  <button onclick="startGame('general')">اختبار عام</button>
</div>

<!-- شاشة الأسئلة -->
<div id="gameScreen" class="screen">
  <div class="top-bar">
    <div class="score">النقاط: <span id="score">0</span></div>
    <div class="timer">⏳ الوقت: <span id="timeLeft">10</span> ث</div>
  </div>
  <div class="question" id="questionText"></div>
  <div class="choices" id="choicesContainer"></div>
</div>

<!-- شاشة النتيجة -->
<div id="resultScreen" class="screen">
  <h2>🎉 لقد أنهيت الاختبار يا حياة!</h2>
  <p>مجموع نقاطك: <span id="finalScore"></span></p>
  <p id="analysis"></p>
  <button onclick="goToMenu()">العودة للقائمة</button>
</div>

<script>
let score = 0;
let currentQuestion = 0;
let currentQuestions = [];
let timer;
let timeLeft = 10;

// بنك الأسئلة
const questions = {
  personality: [
    {q: "هل تفضلين البقاء وحدك أم مع الناس؟", choices: ["وحدي", "مع الناس"], correct: 0},
    {q: "هل تتخذين قراراتك بالعاطفة أم بالعقل؟", choices: ["العاطفة", "العقل"], correct: 0}
  ],
  reaction: [
    {q: "قط ظهر فجأة أمامك! ماذا تفعلين؟", choices: ["أصرخ", "أضحك"], correct: 1},
    {q: "سمعتِ صوت مخيف في الليل..", choices: ["أبحث عن مصدر الصوت", "أهرب"], correct: 0}
  ],
  general: [
    {q: "من هو عالم النفس الذي أسس التحليل النفسي؟", choices: ["سيغموند فرويد", "كارل يونغ"], correct: 0},
    {q: "أول خطوة في حل أي مشكلة نفسية؟", choices: ["التشخيص", "العلاج"], correct: 0}
  ]
};

// صوت الفوز والخسارة
function playSound(type){
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.type = "sine";
  osc.frequency.value = type === "win" ? 800 : 200;
  gain.gain.value = 0.1;
  osc.start();
  osc.stop(ctx.currentTime + 0.2);
}

// الانتقال إلى القائمة
function goToMenu(){
  document.getElementById("startScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.remove("active");
  document.getElementById("menuScreen").classList.add("active");
  score = 0;
  currentQuestion = 0;
}

// بدء اللعبة
function startGame(type){
  currentQuestions = [...questions[type]];
  score = 0;
  currentQuestion = 0;
  document.getElementById("menuScreen").classList.remove("active");
  document.getElementById("gameScreen").classList.add("active");
  document.getElementById("score").textContent = score;
  showQuestion();
}

function startTimer(){
  clearInterval(timer);
  timeLeft = 10;
  document.getElementById("timeLeft").textContent = timeLeft;
  timer = setInterval(()=>{
    timeLeft--;
    document.getElementById("timeLeft").textContent = timeLeft;
    if(timeLeft <= 0){
      clearInterval(timer);
      score--;
      playSound("lose");
      document.getElementById("score").textContent = score;
      currentQuestion++;
      showQuestion();
    }
  }, 1000);
}

function showQuestion(){
  if(currentQuestion >= currentQuestions.length){
    endGame();
    return;
  }
  startTimer();
  const q = currentQuestions[currentQuestion];
  document.getElementById("questionText").textContent = q.q;
  const container = document.getElementById("choicesContainer");
  container.innerHTML = "";
  q.choices.forEach((choice, index)=>{
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.onclick = ()=>checkAnswer(index);
    container.appendChild(btn);
  });
}

function checkAnswer(index){
  clearInterval(timer);
  const q = currentQuestions[currentQuestion];
  if(index === q.correct){
    score++;
    playSound("win");
  } else {
    score--;
    playSound("lose");
  }
  document.getElementById("score").textContent = score;
  currentQuestion++;
  showQuestion();
}

function endGame(){
  clearInterval(timer);
  document.getElementById("gameScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.add("active");
  document.getElementById("finalScore").textContent = score;
  document.getElementById("analysis").textContent = score > 0 
    ? "أحسنتِ يا حياة 👏 أنتِ مميزة وتفكيرك رائع!" 
    : "حاولي مرة أخرى يا حياة 💪 لتعرفي نفسك أكثر!";
}
</script>

</body>
</html>