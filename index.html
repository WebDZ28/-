<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù…Ù†ØµØ© Ø­ÙŠØ§Ø© Ø¹Ù…ÙŠØ´ Ø§Ù„Ù†ÙØ³ÙŠØ©</title>
<style>
  body {
    margin: 0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #0d0d0d, #2c2c2c);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }
  h1, h2 {
    text-align: center;
    animation: fadeIn 1s ease;
  }
  .screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
    max-width: 600px;
    animation: fadeIn 0.5s ease-in-out;
  }
  .active { display: flex; }
  button {
    padding: 12px 24px;
    border: none;
    background: linear-gradient(45deg, #ff0066, #ff6699);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0px 4px 10px rgba(255,0,102,0.4);
  }
  button:hover { transform: scale(1.08); box-shadow: 0px 6px 14px rgba(255,0,102,0.6); }
  .question {
    font-size: 1.4rem;
    margin: 1rem 0;
    text-align: center;
    line-height: 1.6;
  }
  .choices {
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
    width: 100%;
  }
  .progressBar {
    height: 8px;
    width: 100%;
    background: #333;
    border-radius: 4px;
    margin-bottom: 1rem;
    overflow: hidden;
  }
  .progressFill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00ff99, #00cc66);
    transition: width 0.3s ease;
  }
  .score {
    font-size: 1.2rem;
    background: #111;
    padding: 8px 16px;
    border-radius: 8px;
    margin-bottom: 1rem;
  }
  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
  .resultBox {
    background: #1c1c1c;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0px 4px 12px rgba(0,0,0,0.6);
    text-align: center;
    margin: 10px;
  }
  .analysis {
    text-align: left;
    margin-top: 1rem;
    background: #222;
    padding: 10px;
    border-radius: 8px;
  }
  .barContainer {
    background: #333;
    height: 16px;
    border-radius: 8px;
    margin: 6px 0;
    overflow: hidden;
  }
  .bar {
    height: 100%;
    background: linear-gradient(90deg, #ff6699, #ff0066);
    width: 0%;
    transition: width 0.6s ease;
  }
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="startScreen" class="screen active">
  <h1>ğŸ‘‹ Ø£Ù‡Ù„Ø§Ù‹ ÙŠØ§ Ø­ÙŠØ§Ø© Ø¹Ù…ÙŠØ´</h1>
  <h2>Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†ÙØ³ÙŠØ© Ù…ØªØ·ÙˆØ±Ø© 2025</h2>
  <button onclick="goToMenu()">Ø§Ø¨Ø¯Ø£</button>
</div>

<!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
<div id="menuScreen" class="screen">
  <h2>Ø§Ø®ØªØ§Ø±ÙŠ Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
  <button onclick="startTest('mbti')">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ© (MBTI)</button>
  <button onclick="startTest('iq')">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¹Ù‚Ù„ / Ø§Ù„Ø°ÙƒØ§Ø¡</button>
  <button onclick="startTest('narcissism')">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ø±Ø¬Ø³ÙŠØ©</button>
  <button onclick="startTest('reaction')">Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø£ÙØ¹Ø§Ù„</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
<div id="gameScreen" class="screen">
  <div class="score">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
  <div class="progressBar"><div id="progressFill" class="progressFill"></div></div>
  <div class="question" id="questionText"></div>
  <div class="choices" id="choicesContainer"></div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div id="resultScreen" class="screen">
  <div class="resultBox">
    <h2>ğŸ‰ Ù†ØªØ§Ø¦Ø¬Ùƒ ÙŠØ§ Ø­ÙŠØ§Ø©</h2>
    <p>Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: <span id="finalScore"></span></p>
    <div id="mbtiResult"></div>
    <div class="analysis" id="analysis"></div>
  </div>
  <button onclick="goToMenu()">ğŸ”„ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
</div>

<script>
let score = 0, currentQuestion = 0, currentTest = "";
let currentQuestions = [], answers = [];

// Ø£Ø³Ø¦Ù„Ø© Ù…ØªÙ‚Ø¯Ù…Ø©
const questionBank = {
  mbti: [
    {q:"Ù‡Ù„ ØªÙØ¶Ù„ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ ÙØ±ÙŠÙ‚ Ø£Ù… Ø¨Ù…ÙØ±Ø¯ÙƒØŸ", choices:["Ù…Ø¹ ÙØ±ÙŠÙ‚","Ø¨Ù…ÙØ±Ø¯ÙŠ"], trait:"E"},
    {q:"Ù‡Ù„ ØªØ±ÙƒÙ‘Ø²ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£Ù… Ø§Ù„Ø­Ø§Ø¶Ø±ØŸ", choices:["Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„","Ø§Ù„Ø­Ø§Ø¶Ø±"], trait:"N"},
    {q:"Ù‡Ù„ ØªØ¹ØªÙ…Ø¯ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø·Ù‚ Ø£ÙƒØ«Ø± Ø£Ù… Ø§Ù„Ù…Ø´Ø§Ø¹Ø±ØŸ", choices:["Ø§Ù„Ù…Ù†Ø·Ù‚","Ø§Ù„Ù…Ø´Ø§Ø¹Ø±"], trait:"T"},
    {q:"Ù‡Ù„ Ø­ÙŠØ§ØªÙƒ Ù…Ù†Ø¸Ù…Ø© Ø£Ù… Ø¹ÙÙˆÙŠØ©ØŸ", choices:["Ù…Ù†Ø¸Ù…Ø©","Ø¹ÙÙˆÙŠØ©"], trait:"J"}
  ],
  iq: [
    {q:"2+2Ã—2=?", choices:["6","8"], correct:0},
    {q:"Ø¥Ø°Ø§ ÙƒØ§Ù† ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø· Ø­ÙŠÙˆØ§Ù†Ø§ØªØŒ ÙˆÙƒÙ„ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª ØªØªÙ†ÙØ³ØŒ Ù‡Ù„ Ø§Ù„Ù‚Ø·Ø· ØªØªÙ†ÙØ³ØŸ", choices:["Ù†Ø¹Ù…","Ù„Ø§"], correct:0}
  ],
  narcissism: [
    {q:"Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ÙŠÙ† Ø£Ù†Ùƒ Ø£ÙØ¶Ù„ Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† ØºØ§Ù„Ø¨Ø§Ù‹ØŸ", choices:["Ù†Ø¹Ù…","Ù„Ø§"], score:1},
    {q:"Ù‡Ù„ ØªØ­Ø¨ÙŠÙ† Ù„ÙØª Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ØŸ", choices:["Ù†Ø¹Ù…","Ù„Ø§"], score:1}
  ],
  reaction: [
    {q:"Ø¸Ù‡Ø± ØµÙˆØª Ù…ÙØ§Ø¬Ø¦ØŒ Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ÙŠÙ†ØŸ", choices:["Ø£ØµØ±Ø®","Ø£Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ØµØ¯Ø±"], correct:1}
  ]
};

const mbtiTraits = {
  "INTJ":{desc:"Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ",pos:"Ù…ÙÙƒØ± Ø¹Ù…ÙŠÙ‚ØŒ Ù…Ù†Ø¸Ù…ØŒ Ø­Ø§Ø³Ù…",neg:"ÙŠÙ…ÙŠÙ„ Ù„Ù„Ø¹Ø²Ù„Ø© Ø£Ø­ÙŠØ§Ù†Ø§Ù‹",iq:130},
  "INFP":{desc:"Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ Ø§Ù„Ø­Ø§Ù„Ù…",pos:"Ø­Ø³Ø§Ø³ØŒ Ù…Ø¨Ø¯Ø¹ØŒ Ø¹Ø·ÙˆÙ",neg:"ÙŠØªØ±Ø¯Ø¯ ÙÙŠ Ø§ØªØ®Ø§Ø° Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª",iq:120},
  "ENTP":{desc:"Ø§Ù„Ù…Ø¨Ø¯Ø¹ Ø§Ù„Ø¬Ø¯Ù„ÙŠ",pos:"Ø°ÙƒÙŠØŒ Ø³Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø¯ÙŠÙ‡Ø©",neg:"ÙŠÙ…Ù„ Ø¨Ø³Ø±Ø¹Ø©",iq:125}
};

// Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
function startTest(type){
  currentTest = type;
  currentQuestions = [...questionBank[type]];
  score = 0; currentQuestion = 0; answers=[];
  document.getElementById("menuScreen").classList.remove("active");
  document.getElementById("gameScreen").classList.add("active");
  showQuestion();
}

function showQuestion(){
  if(currentQuestion >= currentQuestions.length){ return endTest(); }
  const q = currentQuestions[currentQuestion];
  document.getElementById("questionText").textContent = q.q;
  const container = document.getElementById("choicesContainer");
  container.innerHTML = "";
  q.choices.forEach((choice,i)=>{
    const btn=document.createElement("button");
    btn.textContent=choice;
    btn.onclick=()=>selectAnswer(i);
    container.appendChild(btn);
  });
  updateProgress();
}

function selectAnswer(i){
  const q=currentQuestions[currentQuestion];
  if(currentTest==="mbti"){ answers.push(q.trait==="E"&&i===0?"E":q.trait==="E"?"I":q.trait==="N"&&i===0?"N":q.trait==="N"?"S":q.trait==="T"&&i===0?"T":"F"); }
  if(q.correct!==undefined){ if(i===q.correct){score++;flashEffect("green");}else{score--;flashEffect("red");} }
  if(q.score){ if(i===0) score+=q.score; }
  document.getElementById("score").textContent=score;
  currentQuestion++; showQuestion();
}

function updateProgress(){
  let percent=(currentQuestion/currentQuestions.length)*100;
  document.getElementById("progressFill").style.width=percent+"%";
}

function endTest(){
  document.getElementById("gameScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.add("active");
  document.getElementById("finalScore").textContent=score;

  if(currentTest==="mbti"){
    let result=calcMBTI();
    let data=mbtiTraits[result]||{desc:"Ø´Ø®ØµÙŠØ© ÙØ±ÙŠØ¯Ø©",pos:"Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Øª ÙƒØ«ÙŠØ±Ø©",neg:"Ø³Ù„Ø¨ÙŠØ§Øª Ù‚Ù„ÙŠÙ„Ø©",iq:110};
    document.getElementById("mbtiResult").innerHTML=`<h3>ğŸŒŸ Ù†Ù…Ø·Ùƒ: ${result}</h3><p>${data.desc}</p>`;
    document.getElementById("analysis").innerHTML=`<b>Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ§Øª:</b> ${data.pos}<br><b>Ø³Ù„Ø¨ÙŠØ§Øª:</b> ${data.neg}<br><b>Ù†Ø³Ø¨Ø© Ø°ÙƒØ§Ø¡ ØªÙ‚Ø±ÙŠØ¨ÙŠØ©:</b> ${data.iq}`;
  } else {
    document.getElementById("mbtiResult").innerHTML="";
    document.getElementById("analysis").textContent="ØªÙ… ØªØ­Ù„ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ Ø­ÙŠØ§Ø© âœ…";
  }
}

function calcMBTI(){
  let E=answers.filter(x=>x==="E").length, I=answers.filter(x=>x==="I").length;
  let N=answers.filter(x=>x==="N").length, S=answers.filter(x=>x==="S").length;
  let T=answers.filter(x=>x==="T").length, F=answers.filter(x=>x==="F").length;
  let J=answers.filter(x=>x==="J").length, P=answers.filter(x=>x==="P").length;
  return (E>=I?"E":"I")+(N>=S?"N":"S")+(T>=F?"T":"F")+(J>=P?"J":"P");
}

function goToMenu(){
  document.getElementById("resultScreen").classList.remove("active");
  document.getElementById("startScreen").classList.remove("active");
  document.getElementById("menuScreen").classList.add("active");
}

function flashEffect(color){
  document.body.style.background=color==="green"?"#004d00":"#4d0000";
  setTimeout(()=>{document.body.style.background="linear-gradient(135deg, #0d0d0d, #2c2c2c)";},200);
}
</script>
</body>
</html>