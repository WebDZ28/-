<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ø®ØªØ¨Ø§Ø± Ø­ÙŠØ§Ø© Ø¹Ù…ÙŠØ´</title>
<style>
  body {
    margin: 0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #3a3a3a);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }
  h1, h2 { text-align: center; }
  .screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    animation: fadeIn 0.5s ease-in-out;
  }
  .active { display: flex; }
  button {
    padding: 12px 24px;
    border: none;
    background: #ff0066;
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: transform 0.2s;
  }
  button:hover { transform: scale(1.1); }
  .question {
    font-size: 1.4rem;
    margin: 1rem 0;
    text-align: center;
  }
  .choices {
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
  }
  .score, .timer {
    font-size: 1.2rem;
    background: #222;
    padding: 8px 16px;
    border-radius: 8px;
    margin: 4px;
  }
  .top-bar {
    display: flex;
    justify-content: space-between;
    width: 90%;
  }
  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="startScreen" class="screen active">
  <h1>ÙŠØ§ Ø­ÙŠØ§Ø© Ø¹Ù…ÙŠØ´ ğŸ‘‹</h1>
  <h2>Ù…Ø³ØªØ¹Ø¯Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ</h2>
  <button onclick="goToMenu()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
<div id="menuScreen" class="screen">
  <h2>Ø§Ø®ØªØ§Ø±ÙŠ Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
  <button onclick="startGame('personality')">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø®ØµÙŠØ© (MBTI)</button>
  <button onclick="startGame('reaction')">Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø¯ÙˆØ¯ Ø§Ù„Ø£ÙØ¹Ø§Ù„</button>
  <button onclick="startGame('general')">Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ø§Ù…</button>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
<div id="gameScreen" class="screen">
  <div class="top-bar">
    <div class="score">Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
    <div class="timer">â³ Ø§Ù„ÙˆÙ‚Øª: <span id="timeLeft">10</span> Ø«</div>
  </div>
  <div class="question" id="questionText"></div>
  <div class="choices" id="choicesContainer"></div>
</div>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div id="resultScreen" class="screen">
  <h2>ğŸ‰ Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ§ Ø­ÙŠØ§Ø©!</h2>
  <p>Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‚Ø§Ø·Ùƒ: <span id="finalScore"></span></p>
  <p id="analysis"></p>
  <button onclick="goToMenu()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
</div>

<script>
let score = 0;
let currentQuestion = 0;
let currentQuestions = [];
let timer;
let timeLeft = 10;

// Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
const questions = {
  personality: [
    {q: "Ù‡Ù„ ØªÙØ¶Ù„ÙŠÙ† Ø§Ù„Ø¨Ù‚Ø§Ø¡ ÙˆØ­Ø¯Ùƒ Ø£Ù… Ù…Ø¹ Ø§Ù„Ù†Ø§Ø³ØŸ", choices: ["ÙˆØ­Ø¯ÙŠ", "Ù…Ø¹ Ø§Ù„Ù†Ø§Ø³"], correct: 0},
    {q: "Ù‡Ù„ ØªØªØ®Ø°ÙŠÙ† Ù‚Ø±Ø§Ø±Ø§ØªÙƒ Ø¨Ø§Ù„Ø¹Ø§Ø·ÙØ© Ø£Ù… Ø¨Ø§Ù„Ø¹Ù‚Ù„ØŸ", choices: ["Ø§Ù„Ø¹Ø§Ø·ÙØ©", "Ø§Ù„Ø¹Ù‚Ù„"], correct: 0}
  ],
  reaction: [
    {q: "Ù‚Ø· Ø¸Ù‡Ø± ÙØ¬Ø£Ø© Ø£Ù…Ø§Ù…Ùƒ! Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ÙŠÙ†ØŸ", choices: ["Ø£ØµØ±Ø®", "Ø£Ø¶Ø­Ùƒ"], correct: 1},
    {q: "Ø³Ù…Ø¹ØªÙ ØµÙˆØª Ù…Ø®ÙŠÙ ÙÙŠ Ø§Ù„Ù„ÙŠÙ„..", choices: ["Ø£Ø¨Ø­Ø« Ø¹Ù† Ù…ØµØ¯Ø± Ø§Ù„ØµÙˆØª", "Ø£Ù‡Ø±Ø¨"], correct: 0}
  ],
  general: [
    {q: "Ù…Ù† Ù‡Ùˆ Ø¹Ø§Ù„Ù… Ø§Ù„Ù†ÙØ³ Ø§Ù„Ø°ÙŠ Ø£Ø³Ø³ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ³ÙŠØŸ", choices: ["Ø³ÙŠØºÙ…ÙˆÙ†Ø¯ ÙØ±ÙˆÙŠØ¯", "ÙƒØ§Ø±Ù„ ÙŠÙˆÙ†Øº"], correct: 0},
    {q: "Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ÙÙŠ Ø­Ù„ Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© Ù†ÙØ³ÙŠØ©ØŸ", choices: ["Ø§Ù„ØªØ´Ø®ÙŠØµ", "Ø§Ù„Ø¹Ù„Ø§Ø¬"], correct: 0}
  ]
};

// ØµÙˆØª Ø§Ù„ÙÙˆØ² ÙˆØ§Ù„Ø®Ø³Ø§Ø±Ø©
function playSound(type){
  const ctx = new (window.AudioContext || window.webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();
  osc.connect(gain);
  gain.connect(ctx.destination);
  osc.type = "sine";
  osc.frequency.value = type === "win" ? 800 : 200;
  gain.gain.value = 0.1;
  osc.start();
  osc.stop(ctx.currentTime + 0.2);
}

// Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
function goToMenu(){
  document.getElementById("startScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.remove("active");
  document.getElementById("menuScreen").classList.add("active");
  score = 0;
  currentQuestion = 0;
}

// Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
function startGame(type){
  currentQuestions = [...questions[type]];
  score = 0;
  currentQuestion = 0;
  document.getElementById("menuScreen").classList.remove("active");
  document.getElementById("gameScreen").classList.add("active");
  document.getElementById("score").textContent = score;
  showQuestion();
}

function startTimer(){
  clearInterval(timer);
  timeLeft = 10;
  document.getElementById("timeLeft").textContent = timeLeft;
  timer = setInterval(()=>{
    timeLeft--;
    document.getElementById("timeLeft").textContent = timeLeft;
    if(timeLeft <= 0){
      clearInterval(timer);
      score--;
      playSound("lose");
      document.getElementById("score").textContent = score;
      currentQuestion++;
      showQuestion();
    }
  }, 1000);
}

function showQuestion(){
  if(currentQuestion >= currentQuestions.length){
    endGame();
    return;
  }
  startTimer();
  const q = currentQuestions[currentQuestion];
  document.getElementById("questionText").textContent = q.q;
  const container = document.getElementById("choicesContainer");
  container.innerHTML = "";
  q.choices.forEach((choice, index)=>{
    const btn = document.createElement("button");
    btn.textContent = choice;
    btn.onclick = ()=>checkAnswer(index);
    container.appendChild(btn);
  });
}

function checkAnswer(index){
  clearInterval(timer);
  const q = currentQuestions[currentQuestion];
  if(index === q.correct){
    score++;
    playSound("win");
  } else {
    score--;
    playSound("lose");
  }
  document.getElementById("score").textContent = score;
  currentQuestion++;
  showQuestion();
}

function endGame(){
  clearInterval(timer);
  document.getElementById("gameScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.add("active");
  document.getElementById("finalScore").textContent = score;
  document.getElementById("analysis").textContent = score > 0 
    ? "Ø£Ø­Ø³Ù†ØªÙ ÙŠØ§ Ø­ÙŠØ§Ø© ğŸ‘ Ø£Ù†ØªÙ Ù…Ù…ÙŠØ²Ø© ÙˆØªÙÙƒÙŠØ±Ùƒ Ø±Ø§Ø¦Ø¹!" 
    : "Ø­Ø§ÙˆÙ„ÙŠ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙŠØ§ Ø­ÙŠØ§Ø© ğŸ’ª Ù„ØªØ¹Ø±ÙÙŠ Ù†ÙØ³Ùƒ Ø£ÙƒØ«Ø±!";
}
</script>

</body>
</html>