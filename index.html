<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>منصة حياة عميش النفسية</title>
<style>
  body {
    margin: 0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #0d0d0d, #2c2c2c);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
  }
  h1, h2 {
    text-align: center;
    animation: fadeIn 1s ease;
  }
  .screen {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
    max-width: 600px;
    animation: fadeIn 0.5s ease-in-out;
  }
  .active { display: flex; }
  button {
    padding: 12px 24px;
    border: none;
    background: linear-gradient(45deg, #ff0066, #ff6699);
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0px 4px 10px rgba(255,0,102,0.4);
  }
  button:hover { transform: scale(1.08); box-shadow: 0px 6px 14px rgba(255,0,102,0.6); }
  .question {
    font-size: 1.4rem;
    margin: 1rem 0;
    text-align: center;
    line-height: 1.6;
  }
  .choices {
    display: flex;
    flex-direction: column;
    gap: 0.7rem;
    width: 100%;
  }
  .progressBar {
    height: 8px;
    width: 100%;
    background: #333;
    border-radius: 4px;
    margin-bottom: 1rem;
    overflow: hidden;
  }
  .progressFill {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #00ff99, #00cc66);
    transition: width 0.3s ease;
  }
  .score {
    font-size: 1.2rem;
    background: #111;
    padding: 8px 16px;
    border-radius: 8px;
    margin-bottom: 1rem;
  }
  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
  .resultBox {
    background: #1c1c1c;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0px 4px 12px rgba(0,0,0,0.6);
    text-align: center;
    margin: 10px;
  }
  .analysis {
    text-align: left;
    margin-top: 1rem;
    background: #222;
    padding: 10px;
    border-radius: 8px;
  }
  .barContainer {
    background: #333;
    height: 16px;
    border-radius: 8px;
    margin: 6px 0;
    overflow: hidden;
  }
  .bar {
    height: 100%;
    background: linear-gradient(90deg, #ff6699, #ff0066);
    width: 0%;
    transition: width 0.6s ease;
  }
</style>
</head>
<body>

<!-- شاشة البداية -->
<div id="startScreen" class="screen active">
  <h1>👋 أهلاً يا حياة عميش</h1>
  <h2>اختبارات نفسية متطورة 2025</h2>
  <button onclick="goToMenu()">ابدأ</button>
</div>

<!-- قائمة الاختبارات -->
<div id="menuScreen" class="screen">
  <h2>اختاري نوع الاختبار</h2>
  <button onclick="startTest('mbti')">اختبار الشخصية (MBTI)</button>
  <button onclick="startTest('iq')">اختبار العقل / الذكاء</button>
  <button onclick="startTest('narcissism')">اختبار النرجسية</button>
  <button onclick="startTest('reaction')">اختبار ردود الأفعال</button>
</div>

<!-- شاشة الأسئلة -->
<div id="gameScreen" class="screen">
  <div class="score">النقاط: <span id="score">0</span></div>
  <div class="progressBar"><div id="progressFill" class="progressFill"></div></div>
  <div class="question" id="questionText"></div>
  <div class="choices" id="choicesContainer"></div>
</div>

<!-- شاشة النتيجة -->
<div id="resultScreen" class="screen">
  <div class="resultBox">
    <h2>🎉 نتائجك يا حياة</h2>
    <p>مجموع نقاطك: <span id="finalScore"></span></p>
    <div id="mbtiResult"></div>
    <div class="analysis" id="analysis"></div>
  </div>
  <button onclick="goToMenu()">🔄 العودة للقائمة</button>
</div>

<script>
let score = 0, currentQuestion = 0, currentTest = "";
let currentQuestions = [], answers = [];

// أسئلة متقدمة
const questionBank = {
  mbti: [
    {q:"هل تفضلين العمل مع فريق أم بمفردك؟", choices:["مع فريق","بمفردي"], trait:"E"},
    {q:"هل تركّزين على المستقبل أم الحاضر؟", choices:["المستقبل","الحاضر"], trait:"N"},
    {q:"هل تعتمدين على المنطق أكثر أم المشاعر؟", choices:["المنطق","المشاعر"], trait:"T"},
    {q:"هل حياتك منظمة أم عفوية؟", choices:["منظمة","عفوية"], trait:"J"}
  ],
  iq: [
    {q:"2+2×2=?", choices:["6","8"], correct:0},
    {q:"إذا كان كل القطط حيوانات، وكل الحيوانات تتنفس، هل القطط تتنفس؟", choices:["نعم","لا"], correct:0}
  ],
  narcissism: [
    {q:"هل تعتقدين أنك أفضل من الآخرين غالباً؟", choices:["نعم","لا"], score:1},
    {q:"هل تحبين لفت الانتباه؟", choices:["نعم","لا"], score:1}
  ],
  reaction: [
    {q:"ظهر صوت مفاجئ، ماذا تفعلين؟", choices:["أصرخ","أبحث عن المصدر"], correct:1}
  ]
};

const mbtiTraits = {
  "INTJ":{desc:"المخطط الاستراتيجي",pos:"مفكر عميق، منظم، حاسم",neg:"يميل للعزلة أحياناً",iq:130},
  "INFP":{desc:"المثالي الحالم",pos:"حساس، مبدع، عطوف",neg:"يتردد في اتخاذ القرارات",iq:120},
  "ENTP":{desc:"المبدع الجدلي",pos:"ذكي، سريع البديهة",neg:"يمل بسرعة",iq:125}
};

// بدء الاختبار
function startTest(type){
  currentTest = type;
  currentQuestions = [...questionBank[type]];
  score = 0; currentQuestion = 0; answers=[];
  document.getElementById("menuScreen").classList.remove("active");
  document.getElementById("gameScreen").classList.add("active");
  showQuestion();
}

function showQuestion(){
  if(currentQuestion >= currentQuestions.length){ return endTest(); }
  const q = currentQuestions[currentQuestion];
  document.getElementById("questionText").textContent = q.q;
  const container = document.getElementById("choicesContainer");
  container.innerHTML = "";
  q.choices.forEach((choice,i)=>{
    const btn=document.createElement("button");
    btn.textContent=choice;
    btn.onclick=()=>selectAnswer(i);
    container.appendChild(btn);
  });
  updateProgress();
}

function selectAnswer(i){
  const q=currentQuestions[currentQuestion];
  if(currentTest==="mbti"){ answers.push(q.trait==="E"&&i===0?"E":q.trait==="E"?"I":q.trait==="N"&&i===0?"N":q.trait==="N"?"S":q.trait==="T"&&i===0?"T":"F"); }
  if(q.correct!==undefined){ if(i===q.correct){score++;flashEffect("green");}else{score--;flashEffect("red");} }
  if(q.score){ if(i===0) score+=q.score; }
  document.getElementById("score").textContent=score;
  currentQuestion++; showQuestion();
}

function updateProgress(){
  let percent=(currentQuestion/currentQuestions.length)*100;
  document.getElementById("progressFill").style.width=percent+"%";
}

function endTest(){
  document.getElementById("gameScreen").classList.remove("active");
  document.getElementById("resultScreen").classList.add("active");
  document.getElementById("finalScore").textContent=score;

  if(currentTest==="mbti"){
    let result=calcMBTI();
    let data=mbtiTraits[result]||{desc:"شخصية فريدة",pos:"إيجابيات كثيرة",neg:"سلبيات قليلة",iq:110};
    document.getElementById("mbtiResult").innerHTML=`<h3>🌟 نمطك: ${result}</h3><p>${data.desc}</p>`;
    document.getElementById("analysis").innerHTML=`<b>إيجابيات:</b> ${data.pos}<br><b>سلبيات:</b> ${data.neg}<br><b>نسبة ذكاء تقريبية:</b> ${data.iq}`;
  } else {
    document.getElementById("mbtiResult").innerHTML="";
    document.getElementById("analysis").textContent="تم تحليل إجاباتك بنجاح يا حياة ✅";
  }
}

function calcMBTI(){
  let E=answers.filter(x=>x==="E").length, I=answers.filter(x=>x==="I").length;
  let N=answers.filter(x=>x==="N").length, S=answers.filter(x=>x==="S").length;
  let T=answers.filter(x=>x==="T").length, F=answers.filter(x=>x==="F").length;
  let J=answers.filter(x=>x==="J").length, P=answers.filter(x=>x==="P").length;
  return (E>=I?"E":"I")+(N>=S?"N":"S")+(T>=F?"T":"F")+(J>=P?"J":"P");
}

function goToMenu(){
  document.getElementById("resultScreen").classList.remove("active");
  document.getElementById("startScreen").classList.remove("active");
  document.getElementById("menuScreen").classList.add("active");
}

function flashEffect(color){
  document.body.style.background=color==="green"?"#004d00":"#4d0000";
  setTimeout(()=>{document.body.style.background="linear-gradient(135deg, #0d0d0d, #2c2c2c)";},200);
}
</script>
</body>
</html>